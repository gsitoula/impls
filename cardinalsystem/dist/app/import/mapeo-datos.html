<div class="page" data-ng-controller="importListCtrl">

	<section class="panel panel-default">
		<div class="panel-heading"><strong><span class="glyphicon glyphicon-th"></span> Mapeo de Datos</strong></div>
		
		<div class="panel-body">
			<div class="row">
				<div class="col-md-4" class="input-group">
					<label for="">Cliente</label>
					<!--<div class="input-group">-->
					<input type="text" 
					class="form-control"
					data-ng-model="form.cliente"
					uib-typeahead="cliente.NOM_COM for cliente in clientes_array | filter:$viewValue | limitTo:8"
					typeahead-on-select="onSelectCliente($item, $model, $label)"
					>
					<!--</div>-->
					<span></span>
				</div>
				
				<div class="col-md-4" class="input-group">
					<label for="">Campaña</label>
					<input type="text" 
					class="form-control"
					data-ng-model="form.campana"
					uib-typeahead="campana.CAMPANA for campana in campanas_array | filter:$viewValue | limitTo:8"
					typeahead-on-select="onSelectCampana($item, $model, $label)"
					>
					<span></span>
				</div>
				
				<!--
				<div class="col-md-4">
                    <label for="">Campaña</label>
                    	<span class="ui-select">
                    		<select ng-repeat="campana in campanas_array" data-ng-model="my_campana">
                            	<option value="lala">{{campana.CAMPANA}}</option>
                            </select>
						</span>
				</div>
				-->
			</div>
		</div>

	</section>		

	<section class="panel panel-default">
		<div class="panel-heading"><strong><span class="glyphicon glyphicon-th"></span> Mapeo de Datos</strong></div>
		
		<div class="panel-body">

			<div class="row">
				<div class="col-md-4">
					<label class="btn btn-default" for="selectFile">Seleccionar Archivo</label>
					<input name="selectFile" id="selectFile" type="file" file-reader="fileContent" style="width:0.1px;height:0.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1;" />
					<!--<div>{{fileContent}}</div>-->
					<button class="btn btn-default" ng-click="getContent(fileContent)">Traer Esquema</button>
				</div>
				<div class="col-md-4"></div>
				<div class="col-md-4">
					<div class="row">
						<button class="addfields btn btn-default" ng-click="addNewChoice()">Agregar Campos</button>

						<button class="btn btn-default" ng-click="submitRelaciones()"> Relacionar</button>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="table-responsive col-md-6">
					<table class="table table-striped table-bordered">
						<thead>
							<tr>
								<th>Datos a Importar</th>
								<th>Relación</th>
								<!--<th>Esquema de Datos</th>-->
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="toImport in array_csv_file">
								<td>{{toImport}}</td>
								<td>
									<input ng-model="itemsArrayImportar[$index]" type="number" min="0"/>
								</td>
							</tr>
						</tbody>
					</table>
				</div>

				<div class="table-responsive col-md-6">
					<table class="table table-striped table-bordered">
						<thead>
							<tr>
								<th>Esquema de Datos</th>
								<th>Relación</th>
							</tr>
						</thead>
						<tbody>
							<tr ng-repeat="esquema in array_esquema">
								<td>{{esquema}}</td>
								<td>
									<input ng-model="itemsArrayEsquema[$index]" type="number" min="0"/>
								</td>
							</tr>
							<tr ng-repeat="choice in camposAgregados">
								<td>
									<input ng-model="itemsNuevoCampoArray[$index]" type="text"/>
								</td>
								<td>
									<input ng-model="itemsNuevoArrayEsquema[$index]" type="number" min="0"/>
									<button class="remove btn btn-round btn-default" ng-show="$last" ng-click="removeChoice()">-</button>
								</td>
							</tr>
						</tbody>
					</table>
				</div>

			</div>

		</div>
	</section> 

	<section class="panel panel-default">
		<div class="panel-heading"><strong><span class="glyphicon glyphicon-th"></span> Importación de Campañas</strong></div>

		<div class="panel-body">
			<div class="row">
				<table class="table table-striped table-bordered">
					<thead>
						<tr>
							<th>Campos de Archivo</th>
							<th>Campos de Esquema</th>
						</tr>
					</thead>
					<tbody> 
						<tr ng-repeat="campos in mapeo_array">
							<td>{{campos.campos_en_archivo}}</td>
							<td>{{campos.campos_en_esquema}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</section>
	<!-- INICIO Botonera -->
	<section class="panel panel-default">
		<div class="panel-body">
			<div class="row">
				<div class="col-md-2">
				</div>
				<div class="col-md-10">
					<div class="btn-toolbar pull-right">
						<button type="button" class="btn btn-w-md btn-gap-v btn-round btn-danger" ng-click="cancelarModulo()">Cancelar</button>
						<button type="button" class="btn btn-w-md btn-gap-v btn-round btn-primary" ng-click="realizarMapeo()">Guardar Relación</button>
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- FIN Botonera -->
</div>
